{% extends "layout.html.twig" %}
{% block stylesheet %}
    {{ parent() }}
	<style type="text/css">
        .scrollStyle
	{
		overflow-x:auto;
		float: left;
		width: 100%;
        }
/* 	td.highlight { */
/* 		font-weight: italic; */
/* 		color: red; */
/* 	} */
	</style>
	<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/plug-ins/f2c75b7247b/integration/bootstrap/3/dataTables.bootstrap.css" />
{% endblock %}
{% block javascript %}
		{{ parent() }}
		<script type="text/javascript" language="javascript" src="js/datatables.new/media/js/jquery.dataTables.min.js"></script>
		<script type="text/javascript" language="javascript" src="//cdn.datatables.net/plug-ins/f2c75b7247b/integration/bootstrap/3/dataTables.bootstrap.js"></script>
		{{ highcharts_js|raw }}
	    <script>
        $(document).ready(function() {
        	$("#results").dataTable();
            $("#chart").highcharts({
                chart: {
                    zoomType: 'xy'
                },
                title: {
                    text: 'Number of nodes evaluation'
                },
                xAxis: [{
                    categories: [{{ categories | raw }}],
                    crosshair: true
                }],
                yAxis: [{ // Secondary yAxis
                    gridLineWidth: 0,
                    title: {
                        text: 'Run cost',
                        style: {
                            color: Highcharts.getOptions().colors[0]
                        }
                    },
                    labels: {
                        format: '{value} s',
                        style: {
                            color: Highcharts.getOptions().colors[0]
                        }
                    }}, { // Primary yAxis
                    labels: {
                        format: '{value} s',
                        style: {
                            color: Highcharts.getOptions().colors[2]
                        }
                    },
                    title: {
                        text: 'Execution time',
                        style: {
                            color: Highcharts.getOptions().colors[2]
                        }
                    },
                    opposite: true
                }],
                tooltip: {
                    shared: true
                },
                legend: {
                    layout: 'vertical',
                    align: 'left',
                    x: 80,
                    verticalAlign: 'top',
                    y: 55,
                    floating: true,
                    backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
                },
                series: {{ seriesData | raw }}
            });

            $('form').submit(function() {
                var href = location.protocol + '//' + location.host + location.pathname + '?' + $("form[name='clusterFilters'],form[name='configFilters']").serialize();
                top.location.href = href;
                return false;
            });
        });
	    </script>
    {% endblock %}
    {% block content %}
           <div id="navigation">
           		<div style="float: left; margin: 0 auto; margin-left: 5%; width: 60%;">
	               <div id="chart"></div>
	            </div>
                <div style="width: 30%; float: right;">
                    {% include "common/config_filters.html.twig" %}
                </div>
	            <h1 class="compare title">Edit cluster configuration costs:</h1>
	            <div style="margin: 0 auto; width: 90%; text-align: left;">
	            <form name="clusterFilters" method="GET" role="form">
	            
	              <table class="table stripped">
	              	<thead>
	              		<th>Cluster</th>
	              		<th>Provider</th>
	              		<th>Type</th>
	              		<th>VM OS</th>
	              		<th>Datanodes</th>
	              		<th>Cost/hour</th>
	              		<th>Cost remote disk</th>
	              		<th>Cost SSD</th>
	              		<th>Cost InfiniBand</th>
	              	</thead>
	              	<tbody>
	              	 {% for cluster in clusters %}
	              	   <tr>
	              	     <td>{{ cluster.name }}</td>
	              	     <td>{{ cluster.provider }}</td>
	              	     <td>{{ cluster.type }}</td>
	              	     <td>{{ cluster.vm_OS }}</td>
	              	     <td>{{ cluster.datanodes }}</td>
	              	     <td><input type="text" class="form-control" name="cost_hour[{{ cluster.id_cluster }}]" value="{% if cost_hour[cluster.id_cluster] is defined %}{{ cost_hour[cluster.id_cluster] }}{% else %}{{ cluster.cost_hour }}{% endif %}" size="4"></td>
	              	     <td><input type="text" class="form-control" name="cost_remote[{{ cluster.id_cluster }}]" value="{% if cost_remote[cluster.id_cluster] is defined %}{{ cost_remote[cluster.id_cluster] }}{% else %}{{ cluster.cost_remote }}{% endif %}" size="4"></td>
	              	     <td><input type="text" class="form-control" name="cost_SSD[{{ cluster.id_cluster }}]" value="{% if cost_SSD[cluster.id_cluster] is defined %}{{ cost_SSD[cluster.id_cluster] }}{% else %}{{ cluster.cost_SSD }}{% endif %}" size="4"></td>
	              	     <td><input type="text" class="form-control" name="cost_IB[{{ cluster.id_cluster }}]" value="{% if cost_IB[cluster.id_cluster] is defined %}{{ cost_IB[cluster.id_cluster] }}{% else %}{{ cluster.cost_IB }}{% endif %}" size="4"></td>
	              	   </tr>
	              	  {% endfor %}
	              	</tbody>
	              </table>
	              <button id="submit" type="submit" value="Update prices" class="btn btn-warning">Update prices</button>
	              </form>
	            </div>
	    </div>
    {% endblock %}
